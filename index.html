<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <style>
    .red { color: red; }
  </style>
</head>
<body>
<p id="click-handler">click event</p>
<p id="keyboard-handler">keyboard event</p>
<p id="-handler"></p>

<script>
  var doc = document,
      clickHandler = doc.querySelector('#click-handler'),
      keyboardHandler = doc.querySelector('#keyboard-handler');

  clickHandler.onclick = function () {
    clickHandler.className = 'red';
  }
  keyboardHandler.onkeydown = function () {
    keyboardHandler.className = 'red';
  }

  function simulateClick(el) {
    try {
      // modern browsers, IE11+
      var event = new MouseEvent('click', {
        'view': window,
        'bubbles': true,
        'cancelable': true
      });
      el.dispatchEvent(event);
      alert('MouseEvent');
    } catch (e) {
      if ('createEvent' in document) {
        // modern browsers, IE9+
        var event = document.createEvent('HTMLEvents');
        event.initEvent('click', false, true);
        el.dispatchEvent(event);
        alert('createEvent');
      } else {
        // IE8
        var event = document.createEventObject();
        el.fireEvent('onclick', event);
        alert('None');
      }
    }
  }

  // simulateClick(clickHandler);
  // clickHandler.click(); // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click

  doc.body.onkeypress = function (e) {
    e = e || window.event;
    if (e.which === 37 || e.keyCode === 37) {
      doc.body.style.background = "lightblue";
    }
    // alert(e.which || e.keyCode);
  };

  function simulateKeypress(el, code) {
    // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent
    // try {
    //   // modern browsers, IE11+
    //   var event = new KeyboardEvent('keypress', {
    //     'which': code
    //   });
    //   el.dispatchEvent(event);
    //   // alert('KeyboardEvent');
    // } catch (e) {
      if ('createEvent' in document) {
        // modern browsers, IE9+
        var event = document.createEvent('KeyboardEvent');
        // if (event.initKeyEvent) {
        //   event.initKeyEvent("keypress", true, true, window, 0, 0, 0, 0, 0, code);
        // } else {
        //   event.initKeyboardEvent("keypress", true, true, window, 0, 0, 0, 0, 0, code);
        // }

        if (event.initKeyboardEvent) {  // Chrome, IE
            event.initKeyboardEvent("keypress", true, true, document.defaultView, "ArrowLeft", 0, "", false, "");
        } else { // FireFox
            event.initKeyEvent("keypress", true, true, document.defaultView, false, false, false, false, code, 0);
        }

        el.dispatchEvent(event);
        // alert('createEvent');
      } else {
        // IE8
        var event = document.createEventObject();
        if (event.initKeyEvent) {
          event.initKeyEvent("keypress", true, true, window, 0, 0, 0, 0, 0, code);
        } else {
          event.initKeyboardEvent("keypress", true, true, window, 0, 0, 0, 0, 0, code);
        }
        el.fireEvent('onkeypress', event);
        alert('None');
      }
    // }
  }

  // function simulateKeypress(el, type){
  //  if ('createEvent' in document) {
  //     // modern browsers, IE9+
  //     var e = document.createEvent('HTMLEvents');
  //     e.initEvent(type, false, true);
  //     el.dispatchEvent(e);
  //   } else {
  //     // IE 8
  //     var e = document.createEventObject();
  //     e.eventType = type;
  //     el.fireEvent('on'+ e.eventType, e);
  //   }
  // }
  simulateKeypress(doc.body, 37);

  // https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events
  // https://plainjs.com/javascript/events/trigger-an-event-11/

  // https://github.com/calvinmetcalf/lie ==> promise polyfill
</script>
</body>
</html>