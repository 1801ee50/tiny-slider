/**
 * tiny-slider
 * @version 0.0.0
 * @author William Lin
 * @license The MIT License (MIT)
 * @todo lazyload
 **/
!function(t){window.tinySlider=t()}(function(){"usr strict";function t(){for(var t,e,i,n=arguments[0]||{},o=1,a=arguments.length;a>o;o++)if(null!==(t=arguments[o]))for(e in t)i=t[e],n!==i&&void 0!==i&&(n[e]=i);return n}function e(t,e,i){t=t||window;var n=e+Math.round(99999999*Math.random());t.attachEvent?(t["e"+n]=i,t[n]=function(){t["e"+n](window.event)},t.attachEvent("on"+e,t[n])):t.addEventListener(e,i,!1)}function i(t,e){var i=" "+e;-1===t.className.indexOf(i)&&(t.className+=i)}function n(t,e){var i=" "+e;-1!==t.className.indexOf(i)&&(t.className=t.className.replace(i,""))}function o(t,e){for(var i=[],n=0;n<e.length;n++){var o=e[n];i.push(t[o])}return i}function a(){var t=document,e=window,i=e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth;return i}function s(t,e,i){var n=a();if(void 0===t.length||void 0===e||t.length!==e.length)return i;if(n<t[0])return i;if(n>=t[t.length-1])return e[e.length-1];for(var o=0;o<t.length-1;o++)if(n>=t[o]&&n<=t[o+1])return e[o]}function d(t){for(var e=document.documentElement,i=0;i<t.length;i++)if(t[i]in e.style)return t[i]}function r(t){for(var e=void 0===t.container.length?[t.container]:t.container,i=0;i<e.length;i++){var n=t;n.container=e[i];var o=new h(n)}}function h(i){if(i=t({container:document.querySelector(".slider"),items:1,fixedWidth:!1,slideByPage:!1,nav:!0,navText:["prev","next"],dots:!0,arrowKeys:!1,speed:250,autoplay:!1,autoplayTimeout:5e3,autoplayDirection:"forward",loop:!0,responsive:!1},i||{}),this.container=i.container,this.children=this.container.children,this.childrenLength=this.childrenUpdatedLength=i.childrenLength=this.children.length,this.fixedWidth=i.fixedWidth,this.nav=i.nav,this.navText=i.navText,this.dots=i.dots,this.arrowKeys=i.arrowKeys,this.autoplay=i.autoplay,this.autoplayTimeout=i.autoplayTimeout,this.autoplayDirection="forward"===i.autoplayDirection?1:-1,this.loop=this.fixedWidth?!1:i.loop,this.slideByPage=i.slideByPage,this.responsive=this.fixedWidth?!1:i.responsive,this.bp=this.responsive&&"object"==typeof this.responsive?Object.keys(this.responsive):!1,this.vals=this.responsive&&"object"==typeof this.responsive?o(this.responsive,this.bp):!1,this.itemsMax=void 0!==this.vals.length?Math.max.apply(Math,this.vals):i.items,this.items=s(this.bp,this.vals,i.items),this.speed=this.slideByPage?i.speed*this.items:i.speed,this.animating=!1,this.index=0,!(this.childrenLength>=this.itemsMax))throw new TypeError("items are not enough to show on 1 page");this.init();var n=this,a;if(e(window,"resize",function(){clearTimeout(a),a=setTimeout(function(){n.items=s(n.bp,n.vals,i.items),n.speed=n.slideByPage?i.speed*n.items:i.speed,h.prototype.updateContainer(n),n.dots&&(h.prototype.updateDots(n),h.prototype.updateDotsStatus(n))},100)}),this.nav&&(e(this.next,"click",function(){h.prototype.onNavClick(n,1)}),e(this.prev,"click",function(){h.prototype.onNavClick(n,-1)})),this.arrowKeys&&e(document,"keydown",function(t){t=t||window.event,37===t.keyCode?h.prototype.onNavClick(n,-1):39===t.keyCode&&h.prototype.onNavClick(n,1)}),this.dots)for(var d=0;d<this.allDots.length;d++)e(this.allDots[d],"click",function(t){for(var e,i=0;i<n.allDots.length;i++){var o=t.currentTarget?t.currentTarget:t.srcElement;n.allDots[i]===o&&(e=i)}h.prototype.onDotClick(n,e)});this.autoplay&&setInterval(function(){h.prototype.onNavClick(n,n.autoplayDirection)},n.autoplayTimeout)}Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e=[],i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e});var l=d(["transitionDuration","MozTransitionDuration","WebkitTransitionDuration"]);return h.prototype={init:function(){i(this.container,"tiny-content");var t=this.container.parentNode,e=this.container.nextSibling,n=document.createElement("div"),o=n.cloneNode(!0);if(o.className="tiny-slider",o.appendChild(this.container),e?t.insertBefore(o,e):t.appendChild(o),this.dots){var a=n.cloneNode(!0),s=n.cloneNode(!0);a.className="tiny-dots",s.className="tiny-dot";for(var d=this.childrenLength-1;d>=0;d--){var r=d>0?s.cloneNode(!0):s;a.appendChild(r)}o.appendChild(a),this.allDots=a.querySelectorAll(".tiny-dot")}if(this.nav){var h=n.cloneNode(!0),l=n.cloneNode(!0),c=n.cloneNode(!0);h.className="tiny-nav",l.className="tiny-prev",c.className="tiny-next",2===this.navText.length&&(l.innerHTML=this.navText[0],c.innerHTML=this.navText[1]),h.appendChild(l),h.appendChild(c),o.appendChild(h),this.prev=l,this.next=c}if(this.loop){for(var p=[],f=[],u=this.container.children[0],v=0;v<this.itemsMax;v++){var x=this.children[v].cloneNode(!0),m=this.children[this.children.length-1-v].cloneNode(!0);p.push(x),f.push(m)}for(var y=0;y<p.length;y++)this.container.appendChild(p[y]);for(var g=f.length-1;g>=0;g--)this.container.insertBefore(f[g],u);this.childrenUpdatedLength=this.container.children.length,this.children=this.container.children}for(var W=this.fixedWidth?this.fixedWidth+"px":100/this.childrenUpdatedLength+"%",L=0;L<this.childrenUpdatedLength;L++)this.children[L].style.width=W;this.updateContainer(this),this.dots&&(this.updateDots(this),this.updateDotsStatus(this))},updateContainer:function(t){if(t.loop)t.container.style.marginLeft=-(100*t.itemsMax/t.items)+"%";else{var e=t.container.parentNode.offsetWidth,i=t.fixedWidth?Math.ceil(e/t.fixedWidth):t.items;t.index=Math.max(0,Math.min(t.index,t.childrenLength-i))}var n=t.fixedWidth?t.fixedWidth*t.childrenUpdatedLength+"px":100*t.childrenUpdatedLength/t.items+"%",o=t.fixedWidth?t.fixedWidthGetContainerLeft(t):-(100*t.index/t.items)+"%";t.container.style.width=n,t.container.style.left=o},updateDots:function(t){for(var e=t.container.parentNode.offsetWidth,o=Math.floor(e/t.fixedWidth),a=t.fixedWidth?Math.ceil(t.childrenUpdatedLength/o):Math.ceil(t.childrenLength/t.items),s=t.allDots,d=0;d<s.length;d++)a>d?n(s[d],"tiny-hide"):i(s[d],"tiny-hide")},updateDotsStatus:function(t){var e=t.container.parentNode.offsetWidth,o=Math.floor(e/t.fixedWidth),a,s=t.index,d=t.allDots,r=t.fixedWidth?Math.ceil(t.childrenUpdatedLength/o):Math.ceil(t.childrenLength/t.items);if(0>s?s+=t.childrenLength:s>=t.childrenLength&&(s-=t.childrenLength),a=t.fixedWidth?s+o+1>=t.childrenUpdatedLength?r-1:Math.floor(s/o):Math.floor(s/t.items),!t.loop){var h=/^-?[0-9]+$/,l=h.test(t.childrenLength/t.items);l||t.index!==t.childrenLength-t.items||(a+=1)}for(var c=0;r>c;c++)c===a?i(d[c],"tiny-active"):n(d[c],"tiny-active")},onNavClick:function(t,e){if(!t.animating){if(l&&(t.container.style[l]=t.speed/1e3+"s",t.animating=!0),t.slideByPage&&(e*=t.items),t.index+=e,!t.loop){var i=t.container.parentNode.offsetWidth,n=t.fixedWidth?Math.ceil(i/t.fixedWidth):t.items;t.index=Math.max(0,Math.min(t.index,t.childrenLength-n))}var o=t.fixedWidth?t.fixedWidthGetContainerLeft(t):-(100*t.index/t.items)+"%";t.container.style.left=o,t.loop&&setTimeout(function(){h.prototype.navClickFallback(t)},t.speed),setTimeout(function(){t.dots&&h.prototype.updateDotsStatus(t),t.animating=!1},t.speed)}},fixedWidthGetContainerLeft:function(t){var e=t.container.parentNode.offsetWidth;return t.index*t.fixedWidth+e>(t.childrenUpdatedLength-1)*t.fixedWidth?-(t.childrenUpdatedLength*t.fixedWidth-e)+"px":-(t.fixedWidth*t.index)+"px"},navClickFallback:function(t){l&&(t.container.style[l]="0s");var e=t.slideByPage?t.index<-(t.itemsMax-t.items):t.index<=-t.itemsMax,i=t.slideByPage?t.index>t.childrenLength+t.itemsMax-2*t.items-1:t.index>=t.childrenLength+t.itemsMax-t.items;e&&(t.index+=t.childrenLength),i&&(t.index-=t.childrenLength);var n=t.fixedWidth?-(t.fixedWidth*t.index)+"px":-(100*t.index/t.items)+"%";t.container.style.left=n},onDotClick:function(t,e){if(!t.animating){if(l&&(t.container.style[l]=t.speed/1e3+"s",t.animating=!0),t.fixedWidth){var o=t.container.parentNode.offsetWidth;t.index=e*Math.floor(o/t.fixedWidth)}else t.index=e*t.items,t.loop||(t.index=Math.min(t.index,t.childrenLength-t.items));var a;a=t.fixedWidth?t.fixedWidthGetContainerLeft(t):-(100*t.index/t.items)+"%",t.container.style.left=a,setTimeout(function(){for(var o=0;o<t.allDots.length;o++)o===e?i(t.allDots[o],"tiny-active"):n(t.allDots[o],"tiny-active");t.animating=!1},t.speed)}}},r});