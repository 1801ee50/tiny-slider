/**
 * tiny-slider
 * @version 0.2.2
 * @author William Lin
 * @license The MIT License (MIT)
 * @github https://github.com/ganlanyuan/tiny-slider/
 **/
!function(t){window.tinySlider=t()}(function(){"use strict";function t(){for(var t,i,e,n=arguments[0]||{},a=1,s=arguments.length;s>a;a++)if(null!==(t=arguments[a]))for(i in t)e=t[i],n!==e&&void 0!==e&&(n[i]=e);return n}function i(t,i,e){t=t||window;var n=i+Math.round(99999999*Math.random());t.attachEvent?(t["e"+n]=e,t[n]=function(){t["e"+n](window.event)},t.attachEvent("on"+i,t[n])):t.addEventListener(i,e,!1)}function e(t,i){return-1!==(" "+t.className+" ").indexOf(" "+i+" ")}function n(t,i){for(var n=Array.isArray(i)?i:[i],a=0;a<n.length;a++)e(t,n[a])||(t.className=t.className+" "+n[a])}function a(t,i){for(var n=Array.isArray(i)?i:[i],a=0;a<n.length;a++)e(t,n[a])&&(t.className=t.className.replace(" "+n[a],""))}function s(t){return t*(180/Math.PI)}function o(t,i){return Math.abs(90-Math.abs(t))>=90-i?"horizontal":Math.abs(90-Math.abs(t))<=i?"vertical":!1}function r(t){return t&&"object"==typeof t?Object.keys(t):!1}function l(t,i){if(t&&"object"==typeof t){for(var e=[],n=0;n<i.length;n++){var a=i[n];e.push(t[a])}return e}return!1}function c(){return document.documentElement.clientWidth}function h(t,i,e){var n=c();if(void 0===t.length||void 0===i||t.length!==i.length)return e;if(n<t[0])return e;if(n>=t[t.length-1])return i[i.length-1];for(var a=0;a<t.length-1;a++)if(n>=t[a]&&n<=t[a+1])return i[a]}function d(t){for(var i=document.documentElement,e=0;e<t.length;e++)if(t[e]in i.style)return t[e]}function u(t){g.bottom=(window.innerHeight||document.documentElement.clientHeight)+t,g.right=(window.innerWidth||document.documentElement.clientWidth)+t}function f(t){var i=t.getBoundingClientRect();return i.right>g.left&&i.bottom>g.top&&i.left<g.right&&i.top<g.bottom}function m(t){var i=t.querySelectorAll(".tiny-lazy");if(i)for(var e=0;e<i.length;e++)f(i[e])&&-1===i[e].className.indexOf("loaded")&&(i[e].src=i[e].getAttribute("data-src"),i[e].className+=" loaded")}function v(t){var i;if(t.container){i=void 0===t.container.length?[t.container]:t.container;for(var e=0;e<i.length;e++){var n=t;n.container=i[e];var a=new p(n)}}}function p(e){if(e=t({container:document.querySelector(".slider"),items:1,fixedWidth:!1,maxContainerWidth:!1,slideByPage:!1,nav:!0,navText:["prev","next"],navContainer:!1,dots:!0,dotsContainer:!1,arrowKeys:!1,speed:250,autoplay:!1,autoplayTimeout:5e3,autoplayDirection:"forward",loop:!0,responsive:!1,touch:!0},e||{}),this.container=e.container,this.children=this.container.children,this.cl=this.cul=this.children.length,this.fw=e.fixedWidth,this.nav=e.nav,this.navText=e.navText,this.navContainer=e.navContainer,this.dots=e.dots,this.dotsContainer=e.dotsContainer,this.arrowKeys=e.arrowKeys,this.speed=y?e.speed:0,this.autoplay=e.autoplay,this.autoplayTimeout=e.autoplayTimeout,this.autoplayDirection="forward"===e.autoplayDirection?1:-1,this.loop=e.loop,this.slideByPage=e.slideByPage,this.responsive=this.fw?!1:e.responsive,this.bp=r(this.responsive),this.vals=l(this.responsive,this.bp),this.itemsMax=void 0!==this.vals.length?Math.max.apply(Math,this.vals):e.items,this.items=this.fw?Math.floor(this.container.parentNode.offsetWidth/this.fw):h(this.bp,this.vals,e.items),this.fw&&e.maxContainerWidth?this.itemsMax=Math.ceil(e.maxContainerWidth/this.fw):this.fw&&(this.loop=!1),this.itemsMax=Math.min(this.cl,this.itemsMax),this.items=Math.min(this.cl,this.items),this.dotsCount=this.dotsContainer?this.cl:Math.ceil(this.cl/this.items),this.animating=!1,this.index=0,e.touch){this.startX=0,this.startY=0,this.translateX=0,this.distX=0,this.distY=0,this.rt=0,this.panDir=!1,this.run=!1,this.animating=!1,this.slideEventAdded=!1;var n=this;!this.slideEventAdded&&this.container.addEventListener&&(this.container.addEventListener("touchstart",n.onPanStart(n),!1),this.container.addEventListener("touchmove",n.onPanMove(n),!1),this.container.addEventListener("touchend",n.onPanEnd(n),!1),this.container.addEventListener("touchcancel",n.onPanEnd(n),!1),this.slideEventAdded=!0)}this.init();var a=this,s;if(i(window,"resize",function(){clearTimeout(s),s=setTimeout(function(){a.items=a.fw?Math.floor(a.container.parentNode.offsetWidth/a.fw):h(a.bp,a.vals,e.items),a.items=Math.min(a.cl,a.items),a.dotsCount=a.dotsContainer?a.cl:Math.ceil(a.cl/a.items),a.speed=a.slideByPage?e.speed*a.items:e.speed,a.setDotCurrent(a),a.makeLayout(a),a.setSnapInterval(a),a.translate(a),a.dots&&!a.dotsContainer&&(a.displayDots(a),a.dotActive(a)),m(a.container)},100)}),i(window,"scroll",function(){m(a.container)}),this.nav&&(i(this.next,"click",function(){a.onNavClick(a,1)}),i(this.prev,"click",function(){a.onNavClick(a,-1)})),this.arrowKeys&&i(document,"keydown",function(t){t=t||window.event,37===t.keyCode?a.onNavClick(a,-1):39===t.keyCode&&a.onNavClick(a,1)}),this.dots)for(var o=0;o<this.allDots.length;o++)i(this.allDots[o],"click",this.fireDotClick(this));this.autoplay&&setInterval(function(){a.onNavClick(a,a.autoplayDirection)},a.autoplayTimeout)}Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var i=[],e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i});var y=d(["transitionDuration","WebkitTransitionDuration","MozTransitionDuration","OTransitionDuration"]),x=d(["transform","WebkitTransform","MozTransform","OTransform"]),g={},M=0;return g.top=0-M,g.left=0-M,u(M),i(window,"resize",function(){u(M)}),p.prototype={getAbsIndex:function(t){return t.index<0?t.index+t.cl:t.index>=t.cl?t.index-t.cl:t.index},setTD:function(t,i){y&&(t.container.style[y]=t.speed*i/1e3+"s",t.animating=!0)},setDotCurrent:function(t){if(t.dotCurrent=t.dotsContainer?t.getAbsIndex(t):Math.floor(t.getAbsIndex(t)/t.items),!t.loop&&!t.dotsContainer){var i=/^-?[0-9]+$/,e=i.test(t.cl/t.items);e||t.index!==t.cl-t.items||(t.dotCurrent+=1)}},init:function(){n(this.container,"tiny-content");var t=this.container.parentNode,e=this.container.nextSibling,a=document.createElement("div"),s=a.cloneNode(!0);if(s.className="tiny-slider",s.appendChild(this.container),e?t.insertBefore(s,e):t.appendChild(s),navigator.msMaxTouchPoints&&(n(s,"ms-touch"),i(s,"scroll",function(){y&&(el.container.style[y]="0s"),el.container.style.transform="translate3d(-"+-el.container.scrollLeft()+"px,0,0)"})),this.dots)if(this.dotsContainer)this.allDots=this.dotsContainer.children,n(this.allDots[0],"tiny-active");else{var o=a.cloneNode(!0),r=a.cloneNode(!0);o.className="tiny-dots",r.className="tiny-dot";for(var l=this.cl-1;l>=0;l--){var c=l>0?r.cloneNode(!0):r;o.appendChild(c)}s.appendChild(o),this.allDots=o.querySelectorAll(".tiny-dot")}if(this.nav){var h;if(this.navContainer)h=this.navContainer.children,this.prev=h[0],this.next=h[1];else{h=a.cloneNode(!0);var d=a.cloneNode(!0),u=a.cloneNode(!0);h.className="tiny-nav",d.className="tiny-prev",u.className="tiny-next",2===this.navText.length&&(d.innerHTML=this.navText[0],u.innerHTML=this.navText[1]),h.appendChild(d),h.appendChild(u),s.appendChild(h),this.prev=d,this.next=u}}if(this.loop){for(var f=[],v=[],p=this.container.children[0],x=0;x<this.itemsMax;x++){var g=this.children[x].cloneNode(!0),M=this.children[this.children.length-1-x].cloneNode(!0);f.push(g),v.push(M)}for(var C=0;C<f.length;C++)this.container.appendChild(f[C]);for(var w=v.length-1;w>=0;w--)this.container.insertBefore(v[w],p);this.cul=this.container.children.length,this.children=this.container.children}this.setDotCurrent(this),this.makeLayout(this),this.setSnapInterval(this),this.translate(this),this.itemActive(this),this.dots&&!this.dotsContainer&&(this.displayDots(this),this.dotActive(this)),m(this.container)},makeLayout:function(t){t.itemWidth=t.fw?t.fw:t.container.parentNode.offsetWidth/t.items,t.container.style.width=t.itemWidth*t.cul+"px";for(var i=0;i<t.cul;i++)t.children[i].style.width=t.itemWidth+"px";if(t.loop){var e=-(t.itemsMax*t.itemWidth);t.container.style.marginLeft=e+"px"}},setSnapInterval:function(t){navigator.msMaxTouchPoints&&(t.container.parentNode.style.msScrollSnapPointsX="snapInterval(0%, "+t.itemWidth+")")},itemActive:function(t){for(var i=t.loop?t.index+t.itemsMax:t.index,e=0;e<t.cul;e++)e===i?n(t.children[e],["tiny-current","tiny-visible"]):e>i&&e<i+t.items?(a(t.children[e],"tiny-current"),n(t.children[e],"tiny-visible")):a(t.children[e],["tiny-current","tiny-visible"])},displayDots:function(t){for(var i=0;i<t.allDots.length;i++)i<t.dotsCount?a(t.allDots[i],"tiny-hide"):n(t.allDots[i],"tiny-hide")},dotActive:function(t){if(t.dots)for(var i=0;i<t.dotsCount;i++)i===t.dotCurrent?n(t.allDots[i],"tiny-active"):a(t.allDots[i],"tiny-active")},translate:function(t){var i=t.container.parentNode.offsetWidth,e;e=-t.itemWidth*t.index,t.fw&&!t.loop&&(e=Math.max(e,-(t.cul*t.itemWidth-i))),x?t.container.style[x]="translate3d("+e+"px, 0, 0)":t.container.style.left=e+"px"},fallback:function(t){if(t.loop){var i=t.slideByPage?t.index<-(t.itemsMax-t.items):t.index<=-t.itemsMax,e=t.slideByPage?t.index>t.cl+t.itemsMax-2*t.items-1:t.index>=t.cl+t.itemsMax-t.items;t.fw&&t.itemsMax&&!t.slideByPage&&(e=t.index>=t.cl+t.itemsMax-t.items-1),i&&(t.index+=t.cl),e&&(t.index-=t.cl),y&&(t.container.style[y]="0s"),t.translate(t)}},update:function(t){t.fallback(t),t.itemActive(t),t.dotActive(t),m(t.container),t.animating=!1},onNavClick:function(t,i){if(!t.animating){var e,n;i=t.slideByPage?i*t.items:i,n=Math.abs(i),e=t.index+i,t.index=t.loop?e:Math.max(0,Math.min(e,t.cl-t.items)),t.setTD(t,n),t.translate(t),t.setDotCurrent(t),setTimeout(function(){t.update(t)},t.speed*n)}},fireDotClick:function(t){return function(){for(var i,e=0;e<t.allDots.length;e++)t.allDots[e]===this&&(i=e);t.onDotClick(t,i)}},onDotClick:function(t,i){if(!t.animating){var e,n;e=t.dotsContainer?i:i*t.items,e=t.loop?e:Math.min(e,t.cl-t.items),n=Math.abs(e-t.index),t.index=e,t.setTD(t,n),t.translate(t),t.dotCurrent=i,setTimeout(function(){t.update(t)},t.speed*n)}},onPanStart:function(t){return function(i){var e=i.changedTouches[0];t.startX=parseInt(e.clientX),t.startY=parseInt(e.clientY)}},onPanMove:function(t){return function(i){var e=i.changedTouches[0];if(t.distX=parseInt(e.clientX)-t.startX,t.distY=parseInt(e.clientY)-t.startY,t.rt=s(Math.atan2(t.distY,t.distX)),t.panDir=o(t.rt,15),"horizontal"===t.panDir&&t.animating===!1&&(t.run=!0),t.run){y&&(t.container.style[y]="0s");var n=t.loop?-(t.cl+t.itemsMax-t.items)*t.itemWidth:-(t.cl-t.items)*t.itemWidth,a=t.loop?t.itemsMax*t.itemWidth:0;!t.loop&&t.fw&&(n=-(t.cl*t.itemWidth-t.container.parentNode.offsetWidth)),t.translateX=-t.index*t.itemWidth+t.distX,t.translateX=Math.max(n,Math.min(t.translateX,a)),x?t.container.style[x]="translate3d("+t.translateX+"px, 0, 0)":t.container.style.left=t.translateX+"px",i.preventDefault()}}},onPanEnd:function(t){return function(i){var e=i.changedTouches[0];if(t.distX=parseInt(e.clientX)-t.startX,t.run&&0!==t.distX){i.preventDefault(),t.run=!1,t.translateX=-t.index*t.itemWidth+t.distX;var n,a=t.loop?-t.itemsMax:0,s=t.loop?t.cl+t.itemsMax-t.items:t.cl-t.items;n=-(t.translateX/t.itemWidth),n=t.distX<0?Math.ceil(n):Math.floor(n),n=Math.max(a,Math.min(n,s)),t.index=n,t.setTD(t,1),t.translate(t),t.setDotCurrent(t),setTimeout(function(){t.update(t)},t.speed)}}}},v});