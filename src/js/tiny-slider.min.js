/**
  * tiny-slider
  * @version 0.3.1
  * @author William Lin
  * @license The MIT License (MIT)
  * @github https://github.com/ganlanyuan/tiny-slider/
  * 
  * DEPENDENCIES:
  * firstElementChild, lastElementChild
  * addEventListener
  * extend
  * wrap
  * append
  * indexOf
  * 
  */
var tinySlider=function(){"use strict";function t(t){function r(){C.style.width=Y*W+"px",j&&(C.style.marginLeft=-(V*Y)+"px");for(var t=W;t--;)E[t].style.width=Y+"px"}function s(t){b&&(C.style[b]=q*t/1e3+"s",_=!0)}function o(){navigator.msMaxTouchPoints&&(C.parentNode.style.msScrollSnapPointsX="snapInterval(0%, "+Y+")")}function c(){for(var t=j?Z+V:Z,n=W;n--;)t>n||n>=t+G?E[n].classList.contains("tiny-visible")&&E[n].classList.remove("tiny-current","tiny-visible"):n===t?E[n].classList.add("tiny-current","tiny-visible"):E[n].classList.contains("tiny-visible")||(E[n].classList.remove("tiny-current"),E[n].classList.add("tiny-visible"))}function l(){j||(0===Z?H.classList.add("disabled"):H.classList.remove("disabled"),Z===w-G?J.classList.add("disabled"):J.classList.remove("disabled"))}function d(){if(z&&!N)for(var t=R;t--;){var n=Q[t];U>t?n.classList.contains("tiny-hide")&&n.classList.remove("tiny-hide"):n.classList.contains("tiny-hide")||n.classList.add("tiny-hide")}}function u(){if(z){var t;if(-1===tt){var n=0>Z?Z+w:Z>=w?Z-w:Z;if(t=N?n:Math.floor(n/G),!j&&!N){var e=/^-?[0-9]+$/,i=e.test(w/G);i||Z!==w-G||(t+=1)}}else t=tt,tt=-1;for(var a=U;a--;){var r=Q[a];a===t?r.classList.contains("tiny-active")||r.classList.add("tiny-active"):r.classList.contains("tiny-active")&&r.classList.remove("tiny-active")}}}function f(){var t=C.parentNode.offsetWidth;it=-Y*Z,D&&!j&&(it=Math.max(it,-Math.abs(w*Y-t))),T?C.style[T]="translate3d("+it+"px, 0, 0)":C.style.left=it+"px"}function v(){if(j){var t=A?G-V>Z:-V>=Z,n=A?Z>w+V-2*G-1:Z>=w+V-G;D&&V&&!A&&(n=Z>=w+V-G-1),t&&(Z+=w),n&&(Z-=w),b&&(C.style[b]="0s"),f()}}function h(){v(),c(),l(),u(),L(),_=!1}function y(t){if(!_){t=A?t*G:t;var n=Math.abs(t);Z=j?Z+t:Math.max(0,Math.min(Z+t,w-G)),s(n),f(),setTimeout(function(){h()},q*n)}}function m(){return function(){var t=gn.indexOf(Q,this);p(t)}}function p(t){if(!_){tt=t;var n,e;n=N?t:t*G,n=j?n:Math.min(n,w-G),e=Math.abs(n-Z),Z=n,s(e),f(),setTimeout(function(){h()},q*e)}}function L(){if(gn.isInViewport(C)){var t=C.querySelectorAll(".tiny-visible .tiny-lazy");if(0!==t.length)for(var n=0,e=t.length;e>n;n++)t[n].classList.contains("loaded")||(t[n].src=t[n].getAttribute("data-src"),t[n].classList.add("loaded"))}}function g(){return function(t){var n=t.changedTouches[0];nt=parseInt(n.clientX),et=parseInt(n.clientY)}}function M(){return function(t){var i=t.changedTouches[0];at=parseInt(i.clientX)-nt,rt=parseInt(i.clientY)-et;var a=n(Math.atan2(rt,at)),r=e(a,15);if("horizontal"===r&&_===!1&&(st=!0),st){b&&(C.style[b]="0s");var s=j?-(w+V-G)*Y:-(w-G)*Y,o=j?V*Y:0;!j&&D&&(s=-(w*Y-C.parentNode.offsetWidth)),it=-Z*Y+at,it=Math.max(s,Math.min(it,o)),T?C.style[T]="translate3d("+it+"px, 0, 0)":C.style.left=it+"px",t.preventDefault()}}}function x(){return function(t){var n=t.changedTouches[0];if(at=parseInt(n.clientX)-nt,st&&0!==at){t.preventDefault(),st=!1,it=-Z*Y+at;var e,i=j?-V:0,a=j?w+V-G:w-G;e=-(it/Y),e=0>at?Math.ceil(e):Math.floor(e),e=Math.max(i,Math.min(e,a)),Z=e,s(1),f(),setTimeout(function(){h()},q)}}}t=gn.extend({container:".slider",items:1,fixedWidth:!1,maxContainerWidth:!1,slideByPage:!1,nav:!0,navText:["prev","next"],navContainer:!1,dots:!0,dotsContainer:!1,arrowKeys:!1,speed:250,autoplay:!1,autoplayTimeout:5e3,autoplayDirection:"forward",loop:!0,responsive:!1,lazyload:!1,touch:!0},t||{});var b=gn.getSupportedProp(["transitionDuration","WebkitTransitionDuration","MozTransitionDuration","OTransitionDuration"]),T=gn.getSupportedProp(["transform","WebkitTransform","MozTransform","OTransform"]),C=t.container,E=C.children,w=E.length,W=E.length,D=t.fixedWidth,k=t.nav,I=t.navText,S=t.navContainer?t.navContainer:!1,z=t.dots,N=t.dotsContainer?t.dotsContainer:!1,P=t.arrowKeys,q=b?t.speed:0,B=t.autoplay,O=t.autoplayTimeout,X="forward"===t.autoplayDirection?1:-1,j=D&&!t.maxContainerWidth?!1:t.loop,A=t.slideByPage,F=t.lazyload,K=t.touch,Y,V,G,H,J,Q,R,U,Z=0,_=!1,tt=-1;if(K)var nt=0,et=0,it=0,at=0,rt=0,st=!1,ot=!1;var ct=D?!1:t.responsive,lt=i(ct),dt=a(ct,lt),ut=function(){return D?function(){return Math.min(w,Math.floor(C.parentNode.offsetWidth/D))}:function(){var n,e=document.documentElement.clientWidth;if(void 0!==lt.length&&void 0!==dt&&lt.length===dt.length)if(e<lt[0])n=t.items;else if(e>=lt[lt.length-1])n=dt[dt.length-1];else for(var i=0;i<lt.length-1;i++)e>=lt[i]&&e<=lt[i+1]&&(n=dt[i]);else n=t.items;return Math.min(w,n)}}(),ft=function(){var n;return n=D?t.maxContainerWidth?Math.ceil(t.maxContainerWidth/D):!1:void 0!==dt.length?Math.max.apply(Math,dt):t.items,n?Math.min(w,n):n},vt=function(){return D?function(){return D}:function(){return C.parentNode.offsetWidth/G}}(),ht=function(){return N?function(){return w}:function(){return Math.ceil(w/G)}}();return G=ut(),V=ft(),Y=vt(),U=ht(),{init:function(){C.classList.add("tiny-content");var t=document.createElement("div");if(t.className="tiny-slider",gn.wrap(C,t),navigator.msMaxTouchPoints&&(t.classList.add("ms-touch"),t.addEventListener("scroll",function(){b&&(C.style[b]="0s"),C.style.transform="translate3d(-"+-C.scrollLeft()+"px,0,0)"})),z){if(N)Q=N.children,Q[0].classList.add("tiny-active");else{for(var n="",e=w;e--;)n+='<div class="tiny-dot"></div>';n='<div class="tiny-dots">'+n+"</div>",gn.append(t,n),Q=t.querySelectorAll(".tiny-dot")}R=Q.length}if(k&&(S?(H=S.firstElementChild,J=S.lastElementChild):(gn.append(t,'<div class="tiny-nav"><div class="tiny-prev">'+I[0]+'</div><div class="tiny-next">'+I[1]+"</div></div>"),H=t.querySelector(".tiny-prev"),J=t.querySelector(".tiny-next"))),j){for(var i=document.createDocumentFragment(),a=document.createDocumentFragment(),s=V;s--;){var v=E[s].cloneNode(!0),h=E[w-1-s].cloneNode(!0);i.insertBefore(v,i.firstChild),a.appendChild(h)}C.appendChild(i),C.insertBefore(a,C.firstChild),W=C.children.length,E=C.children}if(r(),o(),f(),c(),k&&(l(),J.addEventListener("click",function(){y(1)}),H.addEventListener("click",function(){y(-1)})),d(),u(),z)for(var p=0;R>p;p++)Q[p].addEventListener("click",m());F&&L(),P&&document.addEventListener("keydown",function(t){t=t||window.event,37===t.keyCode?y(-1):39===t.keyCode&&y(1)}),B&&setInterval(function(){y(X)},O),K&&!ot&&C.addEventListener&&(C.addEventListener("touchstart",g(),!1),C.addEventListener("touchmove",M(),!1),C.addEventListener("touchend",x(),!1),C.addEventListener("touchcancel",x(),!1),ot=!0);var T;window.addEventListener("resize",function(){clearTimeout(T),T=setTimeout(function(){G=ut(),Y=vt(),U=ht(),r(),o(),f(),d(),u(),F&&L()},100)}),window.addEventListener("scroll",function(){F&&L()})}}}function n(t){return t*(180/Math.PI)}function e(t,n){return Math.abs(90-Math.abs(t))>=90-n?"horizontal":Math.abs(90-Math.abs(t))<=n?"vertical":!1}function i(t){return t&&"object"==typeof t?Object.keys(t):!1}function a(t,n){if(t&&"object"==typeof t){for(var e=[],i=0;i<n.length;i++){var a=n[i];e.push(t[a])}return e}return!1}return t}();