/**
  * tiny-slider
  * @version 0.3.1
  * @author William Lin
  * @license The MIT License (MIT)
  * @github https://github.com/ganlanyuan/tiny-slider/
  * 
  * DEPENDENCIES:
  * firstElementChild, lastElementChild
  * addEventListener
  * extend
  * wrap
  * append
  * 
  */
!function(t){window.tinySlider=t()}(function(){"use strict";function t(t){return t*(180/Math.PI)}function e(t,e){return Math.abs(90-Math.abs(t))>=90-e?"horizontal":Math.abs(90-Math.abs(t))<=e?"vertical":!1}function n(t){return t&&"object"==typeof t?Object.keys(t):!1}function i(t,e){if(t&&"object"==typeof t){for(var n=[],i=0;i<e.length;i++){var a=e[i];n.push(t[a])}return n}return!1}function a(t,e,n){var i=document.documentElement.clientWidth;if(void 0===t.length||void 0===e||t.length!==e.length)return n;if(i<t[0])return n;if(i>=t[t.length-1])return e[e.length-1];for(var a=0;a<t.length-1;a++)if(i>=t[a]&&i<=t[a+1])return e[a]}function s(t){var e=document.querySelectorAll(t.container);if(0!==e.length)for(var n=e.length;n--;){var i=t;i.container=e[n];var a=new o(i)}}function o(s){s=gn.extend({container:".slider",items:1,fixedWidth:!1,maxContainerWidth:!1,slideByPage:!1,nav:!0,navText:["prev","next"],navContainer:!1,dots:!0,dotContainer:!1,arrowKeys:!1,speed:250,autoplay:!1,autoplayTimeout:5e3,autoplayDirection:"forward",loop:!0,responsive:!1,lazyload:!1,offset:0,touch:!0},s||{});var o=this,d=s.container,c=d.children,h=c.length,u=c.length,f=s.fixedWidth,v=s.nav,y=s.navText,p=s.navContainer,m=s.dots,g=s.dotContainer,L=s.arrowKeys,M=r?s.speed:0,C=s.autoplay,x=s.autoplayTimeout,b="forward"===s.autoplayDirection?1:-1,D=s.loop,k=s.slideByPage,T=f?!1:s.responsive,E=s.lazyload,w=s.touch,N=n(T),I=i(T,N),P=void 0!==I.length?Math.max.apply(Math,I):s.items,S=f?Math.floor(d.parentNode.offsetWidth/f):a(N,I,s.items);f&&s.maxContainerWidth?P=Math.ceil(s.maxContainerWidth/f):f&&(D=!1),P=Math.min(h,P),S=Math.min(h,S);var A,z,W=g?h:Math.ceil(h/S),q,B=!1,X=0,j,O,F;if(E){var K=s.offset,Y={},V={},G=!1;Y.top=0-K,Y.left=0-K}if(w)var H=0,J=0,Q=0,R=0,U=0,Z=0,_=!1,tt=!1,B=!1,et=!1;this.getAbsIndex=function(){return 0>X?X+h:X>=h?X-h:X},this.setTransitionDuration=function(t){r&&(d.style[r]=M*t/1e3+"s",B=!0)},this.setDotCurrent=function(){if(q=g?this.getAbsIndex():Math.floor(this.getAbsIndex()/S),!D&&!g){var t=/^-?[0-9]+$/,e=t.test(h/S);e||X!==h-S||(q+=1)}},this.init=function(){d.classList.add("tiny-content");var t=document.createElement("div");if(t.className="tiny-slider",gn.wrap(d,t),navigator.msMaxTouchPoints&&(t.classList.add("ms-touch"),t.addEventListener("scroll",function(){r&&(d.style[r]="0s"),d.style.transform="translate3d(-"+-d.scrollLeft()+"px,0,0)"})),m)if(g)z=g.children,z[0].classList.add("tiny-active");else{for(var e="",n=h;n--;)e+='<div class="tiny-dot"></div>';e='<div class="tiny-dots">'+e+"</div>",gn.append(t,e),z=t.querySelectorAll(".tiny-dot")}if(v&&(p?(O=p.firstElementChild,F=p.lastElementChild):(gn.append(t,'<div class="tiny-nav"><div class="tiny-prev">'+y[0]+'</div><div class="tiny-next">'+y[1]+"</div></div>"),O=t.querySelector(".tiny-prev"),F=t.querySelector(".tiny-next"))),D){for(var i=document.createDocumentFragment(),a=document.createDocumentFragment(),s=P;s--;){var l=c[s].cloneNode(!0),f=c[c.length-1-s].cloneNode(!0);i.insertBefore(l,i.firstChild),a.insertBefore(f,a.firstChild)}d.appendChild(i),d.insertBefore(a,d.firstChild),u=d.children.length,c=d.children}if(this.setDotCurrent(),this.makeLayout(),this.setSnapInterval(),this.translate(),this.itemActive(),v&&(this.disableNav(),F.addEventListener("click",function(){o.onNavClick(1)}),O.addEventListener("click",function(){o.onNavClick(-1)})),m){g||(this.displayDots(),this.dotActive());for(var M=0;M<z.length;M++)z[M].addEventListener("click",this.fireDotClick())}E&&this.lazyLoad(),L&&document.addEventListener("keydown",function(t){t=t||window.event,37===t.keyCode?o.onNavClick(-1):39===t.keyCode&&o.onNavClick(1)}),C&&setInterval(function(){o.onNavClick(b)},x),w&&!et&&d.addEventListener&&(d.addEventListener("touchstart",o.onPanStart(),!1),d.addEventListener("touchmove",o.onPanMove(),!1),d.addEventListener("touchend",o.onPanEnd(),!1),d.addEventListener("touchcancel",o.onPanEnd(),!1),et=!0)},this.makeLayout=function(){A=f?f:d.parentNode.offsetWidth/S,d.style.width=A*u+"px";for(var t=0;u>t;t++)c[t].style.width=A+"px";if(D){var e=-(P*A);d.style.marginLeft=e+"px"}},this.setSnapInterval=function(){navigator.msMaxTouchPoints&&(d.parentNode.style.msScrollSnapPointsX="snapInterval(0%, "+A+")")},this.itemActive=function(){j=D?X+P:X;for(var t=0;u>t;t++)t===j?c[t].classList.add("tiny-current","tiny-visible"):t>j&&j+S>t?(c[t].classList.remove("tiny-current"),c[t].classList.add("tiny-visible")):c[t].classList.remove("tiny-current","tiny-visible")},this.disableNav=function(){D||(0===X?O.classList.add("disabled"):O.classList.remove("disabled"),X===h-S?F.classList.add("disabled"):F.classList.remove("disabled"))},this.displayDots=function(){for(var t=0;t<z.length;t++)W>t?z[t].classList.remove("tiny-hide"):z[t].classList.add("tiny-hide")},this.dotActive=function(){if(m)for(var t=0;W>t;t++)t===q?z[t].classList.add("tiny-active"):z[t].classList.remove("tiny-active")},this.translate=function(){var t=d.parentNode.offsetWidth;Q=-A*X,f&&!D&&(Q=Math.max(Q,-(u*A-t))),l?d.style[l]="translate3d("+Q+"px, 0, 0)":d.style.left=Q+"px"},this.fallback=function(){if(D){var t=k?-(P-S)>X:-P>=X,e=k?X>h+P-2*S-1:X>=h+P-S;f&&P&&!k&&(e=X>=h+P-S-1),t&&(X+=h),e&&(X-=h),r&&(d.style[r]="0s"),this.translate()}},this.update=function(){this.fallback(),this.itemActive(),this.disableNav(),this.dotActive(),this.lazyLoad(),B=!1},this.onNavClick=function(t){if(!B){var e,n;t=k?t*S:t,n=Math.abs(t),e=X+t,X=D?e:Math.max(0,Math.min(e,h-S)),this.setTransitionDuration(n),this.translate(),this.setDotCurrent(),setTimeout(function(){o.update()},M*n)}},this.fireDotClick=function(){return function(){for(var t,e=0;e<z.length;e++)z[e]===this&&(t=e);o.onDotClick(t)}},this.onDotClick=function(t){if(!B){var e,n;e=g?t:t*S,e=D?e:Math.min(e,h-S),n=Math.abs(e-X),X=e,this.setTransitionDuration(n),this.translate(),q=t,setTimeout(function(){o.update()},M*n)}},this.lazyLoad=function(){if(gn.isInViewport(d)){var t=d.querySelectorAll(".tiny-visible .tiny-lazy");if(0!==!t.length)for(var e=0,n=t.length;n>e;e++)t[e].classList.contains("loaded")||(t[e].src=t[e].getAttribute("data-src"),t[e].classList.add("loaded"))}},this.onPanStart=function(){return function(t){var e=t.changedTouches[0];H=parseInt(e.clientX),J=parseInt(e.clientY)}},this.onPanMove=function(){return function(n){var i=n.changedTouches[0];if(R=parseInt(i.clientX)-H,U=parseInt(i.clientY)-J,Z=t(Math.atan2(U,R)),_=e(Z,15),"horizontal"===_&&B===!1&&(tt=!0),tt){r&&(d.style[r]="0s");var a=D?-(h+P-S)*A:-(h-S)*A,s=D?P*A:0;!D&&f&&(a=-(h*A-d.parentNode.offsetWidth)),Q=-X*A+R,Q=Math.max(a,Math.min(Q,s)),l?d.style[l]="translate3d("+Q+"px, 0, 0)":d.style.left=Q+"px",n.preventDefault()}}},this.onPanEnd=function(){return function(t){var e=t.changedTouches[0];if(R=parseInt(e.clientX)-H,tt&&0!==R){t.preventDefault(),tt=!1,Q=-X*A+R;var n,i=D?-P:0,a=D?h+P-S:h-S;n=-(Q/A),n=0>R?Math.ceil(n):Math.floor(n),n=Math.max(i,Math.min(n,a)),X=n,o.setTransitionDuration(1),o.translate(),o.setDotCurrent(),setTimeout(function(){o.update()},M)}}},this.init();var nt;window.addEventListener("resize",function(){clearTimeout(nt),nt=setTimeout(function(){S=f?Math.floor(d.parentNode.offsetWidth/f):a(N,I,s.items),S=Math.min(h,S),W=g?h:Math.ceil(h/S),M=k?s.speed*S:s.speed,o.setDotCurrent(),o.makeLayout(),o.setSnapInterval(),o.translate(),m&&!g&&(o.displayDots(),o.dotActive()),E&&o.lazyLoad()},100)}),window.addEventListener("scroll",function(){E&&o.lazyLoad()})}var r=gn.getSupportedProp(["transitionDuration","WebkitTransitionDuration","MozTransitionDuration","OTransitionDuration"]),l=gn.getSupportedProp(["transform","WebkitTransform","MozTransform","OTransform"]);return s});